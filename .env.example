# Flask
FLASK_ENV=development
# Generate a strong secret: python -c "import secrets; print(secrets.token_hex(32))"
SECRET_KEY=change-this-to-a-random-string

# Database
DATABASE_URL=sqlite:///bibliotheca.db

# Admin seed account (created on first run)
ADMIN_EMAIL=admin@oratory.example.org
# Required in production; use 12-72 chars with upper/lower/number.
ADMIN_PASSWORD=

# Lending
DEFAULT_LOAN_DAYS=7
MAX_LOANS_PER_PATRON=5
REMINDER_DAYS_BEFORE_DUE=2
MAX_RENEWALS=2

# Security
MAX_FAILED_LOGINS=5
ACCOUNT_LOCKOUT_MINUTES=15
REGISTRATION_ENABLED=true
TRUST_PROXY=false

# Rate limiting
RATELIMIT_DEFAULT=200 per hour
RATELIMIT_STORAGE_URI=memory://

# Upload limits
MAX_FILES_PER_UPLOAD=20
MAX_PDF_FILE_SIZE_MB=25
MAX_COVER_FILE_SIZE_MB=10

# Email (Brevo HTTP API)
BREVO_API_KEY=
MAIL_DEFAULT_SENDER=library@oratory.example.org
MAIL_DEFAULT_SENDER_NAME=Custos Oratorii

# Library branding
LIBRARY_CONTACT_EMAIL=library@oratory.example.org
# Development can use localhost; production must be an HTTPS URL.
LIBRARY_DOMAIN=http://localhost:8080

# Scheduler
SCHEDULER_ENABLED=true
SCHEDULER_EXPIRY_INTERVAL_MINUTES=5
SCHEDULER_REMINDER_INTERVAL_MINUTES=60
SCHEDULER_MAX_CONSECUTIVE_FAILURES=3

# Scanner
SCAN_FILE_TIMEOUT_SECONDS=300

# Worker count — MUST remain 1. The lending checkout lock is process-local;
# multiple workers would allow double-checkouts.
# WEB_CONCURRENCY=1
# GUNICORN_TIMEOUT_SECONDS=120
# GUNICORN_GRACEFUL_TIMEOUT_SECONDS=30

# AI metadata extraction (Claude API)
ANTHROPIC_API_KEY=
AI_EXTRACTION_ENABLED=false
AI_EXTRACTION_TIER=tier2
AI_MAX_PAGES_DEEP=9999
AI_REQUEST_TIMEOUT_SECONDS=30

# Google OAuth (optional)
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# Offsite backup (optional — used by scripts/backup.sh)
# rsync-compatible destination, e.g. user@backup-host:/backups/bibliotheca
# BACKUP_REMOTE=
