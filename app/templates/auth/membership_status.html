{% extends "base.html" %}

{% block title %}Membership Status â€” {{ library_name_latin }}{% endblock %}

{% block content %}
<div class="auth-page">
  <div class="auth-card" style="max-width: 540px;">
    <div class="auth-header">
      <img src="{{ url_for('static', filename='img/logo.png') }}" alt="Library crest" class="auth-logo">
      <h1 class="auth-title">Membership Status</h1>
    </div>

    {% if application %}
      <div class="status-card status-card--{{ application.status }}">
        <p class="status-label">Application Status</p>
        <p class="status-value">
          {% if application.status == 'pending' %}
            Pending Review
          {% elif application.status == 'approved' %}
            Approved
          {% elif application.status == 'rejected' %}
            Not Approved
          {% endif %}
        </p>
        <p class="status-date">Submitted {{ application.created_at.strftime('%B %d, %Y') }}</p>
      </div>

      {% if application.status == 'pending' %}
        <p class="status-message">
          Thank you for your application. We are reviewing it and will be in touch soon.
          You will receive an email when a decision is made.
        </p>
      {% elif application.status == 'approved' %}
        <p class="status-message">
          Welcome to the Oratory! You now have full access to the library.
        </p>
        <a href="{{ url_for('catalog.index') }}" class="btn btn-primary btn-full">Enter the Library</a>
      {% elif application.status == 'rejected' %}
        <p class="status-message">
          We were unable to approve your application at this time.
          If you have questions, please contact us.
        </p>
        <a href="mailto:{{ library_contact_email }}" class="btn btn-outline btn-full">Contact Us</a>
      {% endif %}

    {% else %}
      <p class="status-message">You have not yet submitted a membership application.</p>
      <a href="{{ url_for('auth.join') }}" class="btn btn-primary btn-full">Apply to Join</a>
    {% endif %}
  </div>
</div>
{% endblock %}
