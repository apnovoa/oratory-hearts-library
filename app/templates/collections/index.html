{% extends "base.html" %}

{% block title %}Collections{% endblock %}

{% block content %}
<section class="collections-page">
  <header class="collections-section">
    <h1 class="collection-title">Reading Lists</h1>
    <p class="collection-desc content-narrow">
      Curated collections to guide your reading throughout the liturgical year and beyond.
    </p>
  </header>

  {# ── Seasonal Recommendations ───────────────────────────────────── #}
  {% if seasonal_lists %}
  <section class="collections-section">
    <div class="season-banner">
      <h2 class="season-banner-title">
        {{ season_name }}
      </h2>
      <p class="season-banner-desc">
        {{ season_description }}
      </p>
    </div>

    <div class="collections-grid">
      {% for rl in seasonal_lists %}
        <a href="{{ url_for('collections.detail', public_id=rl.public_id) }}" class="collection-card collection-card--featured">
          <h3 class="collection-card-title">{{ rl.name }}</h3>
          {% if rl.description %}
            <p class="collection-card-desc">{{ rl.description|truncate(160) }}</p>
          {% endif %}
          <span class="collection-card-count">{{ rl.items|length }} {{ "book" if rl.items|length == 1 else "books" }}</span>
        </a>
      {% endfor %}
    </div>
  </section>
  {% endif %}

  {# ── Featured Collections ───────────────────────────────────────── #}
  {% if featured_lists %}
  <section class="collections-section">
    <h2 class="collections-section-title">
      Featured Collections
    </h2>

    <div class="collections-grid">
      {% for rl in featured_lists %}
        <a href="{{ url_for('collections.detail', public_id=rl.public_id) }}" class="collection-card">
          <h3 class="collection-card-title">{{ rl.name }}</h3>
          {% if rl.description %}
            <p class="collection-card-desc">{{ rl.description|truncate(160) }}</p>
          {% endif %}
          <span class="collection-card-count">{{ rl.items|length }} {{ "book" if rl.items|length == 1 else "books" }}</span>
        </a>
      {% endfor %}
    </div>
  </section>
  {% endif %}

  {# ── All Other Collections ──────────────────────────────────────── #}
  {% if other_lists %}
  <section class="collections-section">
    <h2 class="collections-section-title">
      All Collections
    </h2>

    <div class="collections-grid">
      {% for rl in other_lists %}
        <a href="{{ url_for('collections.detail', public_id=rl.public_id) }}" class="collection-card collection-card--secondary">
          <h3 class="collection-card-title">{{ rl.name }}</h3>
          {% if rl.description %}
            <p class="collection-card-desc">{{ rl.description|truncate(160) }}</p>
          {% endif %}
          <span class="collection-card-count">{{ rl.items|length }} {{ "book" if rl.items|length == 1 else "books" }}</span>
        </a>
      {% endfor %}
    </div>
  </section>
  {% endif %}

  {# ── Empty State ────────────────────────────────────────────────── #}
  {% if not seasonal_lists and not featured_lists and not other_lists %}
  <div class="collections-empty">
    <p class="collections-empty-main">No reading lists have been published yet.</p>
    <p class="collections-empty-sub">Check back soon for curated collections from our librarians.</p>
  </div>
  {% endif %}
</section>
{% endblock %}
